{% extends 'dashboard/base.html' %}

{% block title %}Users - Pethood Admin{% endblock %}
{% block page_title %}User Management{% endblock %}

{% block content %}
<style>
.search-bar {
    margin-bottom: 20px;
}

.search-bar form {
    display: flex;
    gap: 10px;
    max-width: 500px;
}

.search-bar input {
    flex: 1;
    padding: 10px 15px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
}
</style>

<div class="search-bar">
    <form method="get">
        <input type="text" name="q" placeholder="Search users by name, email, username..." value="{{ query }}">
        <button type="submit" class="btn btn-secondary">Search</button>
    </form>
</div>

<div class="card">
    {% if users %}
    <table>
        <thead>
            <tr>
                <th>Username</th>
                <th>Name</th>
                <th>Email</th>
                <th>Orders</th>
                <th>Dogs Listed</th>
                <th>Joined</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td><strong>{{ user.username }}</strong></td>
                <td>{{ user.first_name }} {{ user.last_name }}</td>
                <td>{{ user.email }}</td>
                <td>{{ user.order_count }}</td>
                <td>{{ user.dog_count }}</td>
                <td>{{ user.date_joined|date:"M d, Y" }}</td>
                <td>
                    <a href="{% url 'dashboard:user_detail' user.id %}" class="btn btn-primary btn-sm">
                        <i class="fas fa-eye"></i> View Details
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p style="text-align: center; padding: 40px; color: #999;">No users found</p>
    {% endif %}
</div>
{% endblock %}
