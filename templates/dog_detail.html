{% extends 'base.html' %}
{% block title %}{{ dog.name }} - Adopt Me - Pethood{% endblock %}
{% load static %}
{% block content %}

<style>
/* Page background - butter yellow like shop */
body {
    background: #fffbea;
    font-family: Arial, sans-serif;
}

.dog-detail-container {
    max-width: 1100px;
    margin: 40px auto;
    padding: 0 20px;
}

.back-link {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    color: #5a3e00;
    text-decoration: none;
    margin-bottom: 20px;
    font-size: 16px;
    transition: color 0.3s;
    font-weight: 600;
}

.back-link:hover {
    color: #ff6f91;
}

.dog-detail-card {
    background: white;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 10px 40px rgba(0,0,0,0.08);
    border: 2px solid #f5d76e;
}

.dog-detail-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0;
}

.dog-detail-image {
    width: 100%;
    height: 600px;
    object-fit: contain;
    background: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 150px;
    padding: 30px;
}

.dog-detail-content {
    padding: 50px;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.dog-status {
    display: inline-block;
    padding: 8px 16px;
    background: #fff7d1;
    color: #5a3e00;
    border-radius: 20px;
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 15px;
    border: 2px solid #f5d76e;
}

.dog-detail-name {
    font-size: 42px;
    font-weight: bold;
    color: #000;
    margin-bottom: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.dog-detail-breed {
    font-size: 24px;
    color: #ff6f91;
    font-weight: 600;
    margin-bottom: 25px;
}

.dog-quick-info {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    margin-bottom: 30px;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 12px;
    border: 2px solid #e0e0e0;
}

.info-item {
    display: flex;
    flex-direction: column;
}

.info-label {
    font-size: 13px;
    color: #5a3e00;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 5px;
    font-weight: 600;
}

.info-value {
    font-size: 18px;
    font-weight: 600;
    color: #000;
}

.section-title {
    font-size: 20px;
    font-weight: bold;
    color: #000;
    margin-bottom: 15px;
    margin-top: 30px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.dog-description {
    font-size: 16px;
    line-height: 1.8;
    color: #555;
    margin-bottom: 25px;
}

.adoption-price {
    font-size: 32px;
    font-weight: bold;
    color: #ff6f91;
    text-align: center;
    padding: 20px;
    background: #fff7d1;
    border-radius: 12px;
    margin-bottom: 20px;
    border: 2px solid #f5d76e;
}

.adoption-cta {
    display: flex;
    gap: 15px;
}

.btn-adopt, .btn-contact {
    flex: 1;
    padding: 18px;
    font-size: 18px;
    font-weight: 600;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s;
    text-align: center;
    text-decoration: none;
}

.btn-adopt {
    background: #ff6f91;
    color: white;
}

.btn-adopt:hover {
    background: #ff4d7a;
    transform: translateY(-2px);
}

.btn-contact {
    background: white;
    color: #ff6f91;
    border: 2px solid #ff6f91;
}

.btn-contact:hover {
    background: #ff6f91;
    color: white;
}

@media (max-width: 968px) {
    .dog-detail-grid {
        grid-template-columns: 1fr;
    }
    
    .dog-detail-image {
        height: 400px;
    }
    
    .dog-detail-content {
        padding: 30px;
    }
    
    .dog-detail-name {
        font-size: 32px;
    }
    
    .dog-quick-info {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 480px) {
    .adoption-cta {
        flex-direction: column;
    }
}

.image-gallery-container {
    background: #fff;
}

.main-image-wrapper {
    width: 100%;
    height: 500px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.main-image-wrapper img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}

.thumbnail-strip {
    display: flex;
    gap: 10px;
    padding: 10px 20px 20px;
    overflow-x: auto;
    background: #f8f9fa;
}

.thumbnail {
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: 8px;
    cursor: pointer;
    border: 2px solid #e0e0e0;
    transition: all 0.3s;
    flex-shrink: 0;
}

.thumbnail:hover,
.thumbnail.active {
    border-color: #ff6f91;
    transform: scale(1.05);
}
</style>

<script>
function changeImage(src, element) {
    document.getElementById('mainImage').src = src;
    document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
    element.classList.add('active');
}
</script>

<div class="dog-detail-container">
    <a href="{% url 'dog:dog_list' %}" class="back-link">
        <i class="fas fa-arrow-left"></i> Back to All Dogs
    </a>

    <div class="dog-detail-card">
        <div class="dog-detail-grid">
            <div class="image-gallery-container">
                {% if dog.image or dog.images.exists %}
                <div class="main-image-wrapper">
                    {% if dog.image %}
                    <img id="mainImage" src="{{ dog.image.url }}" alt="{{ dog.name }}">
                    {% elif dog.images.first %}
                    <img id="mainImage" src="{{ dog.images.first.image.url }}" alt="{{ dog.name }}">
                    {% endif %}
                </div>
                
                {% if dog.images.exists or dog.image %}
                <div class="thumbnail-strip">
                    {% if dog.image %}
                    <img src="{{ dog.image.url }}" alt="{{ dog.name }}" class="thumbnail active" onclick="changeImage('{{ dog.image.url }}', this)">
                    {% endif %}
                    {% for img in dog.images.all %}
                    <img src="{{ img.image.url }}" alt="{{ dog.name }}" class="thumbnail {% if not dog.image and forloop.first %}active{% endif %}" onclick="changeImage('{{ img.image.url }}', this)">
                    {% endfor %}
                </div>
                {% endif %}
                {% else %}
                <div class="dog-detail-image"></div>
                {% endif %}
            </div>
            
            <div class="dog-detail-content">
                <h1 class="dog-detail-name">{{ dog.name }}</h1>
                <div class="dog-detail-breed">{{ dog.breed }}</div>
                
                <div class="dog-quick-info">
                    <div class="info-item">
                        <span class="info-label">Gender</span>
                        <span class="info-value">{{ dog.get_gender_display }}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Age</span>
                        <span class="info-value">{{ dog.get_age_display }}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Behaviour</span>
                        <span class="info-value">{{ dog.behaviour }}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Price</span>
                        <span class="info-value" style="color: #ff6f91;">रु{{ dog.price|floatformat:0 }}</span>
                    </div>
                    {% if dog.location %}
                    <div class="info-item">
                        <span class="info-label">Location</span>
                        <span class="info-value">{{ dog.location }}</span>
                    </div>
                    {% endif %}
                </div>
                
                <h3 class="section-title">About {{ dog.name }}</h3>
                <p class="dog-description">{{ dog.description }}</p>
            </div>
        </div>
        
        <!-- Contact Lister Section - Full Width Below Images -->
        {% if dog.lister %}
        <div style="padding: 30px 50px 40px; background: white;">
            <h3 class="section-title" style="margin-top: 0; text-align: center; font-size: 24px; margin-bottom: 25px;">Contact Lister</h3>
            <div style="display: flex; justify-content: center; gap: 40px; flex-wrap: wrap; max-width: 800px; margin: 0 auto;">
                <div style="text-align: center; min-width: 200px;">
                    <div style="width: 60px; height: 60px; background: #f8f9fa; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 15px; border: 2px solid #e0e0e0;">
                        <i class="fas fa-user" style="font-size: 24px; color: #ff6f91;"></i>
                    </div>
                    {% if dog.lister.first_name and dog.lister.last_name %}
                    <p style="margin: 0; color: #5a3e00; font-size: 12px; text-transform: uppercase; letter-spacing: 1px; font-weight: 600; margin-bottom: 8px;">Name</p>
                    <p style="margin: 0; font-size: 18px; color: #000; font-weight: 600;">{{ dog.lister.first_name }} {{ dog.lister.last_name }}</p>
                    {% else %}
                    <p style="margin: 0; color: #5a3e00; font-size: 12px; text-transform: uppercase; letter-spacing: 1px; font-weight: 600; margin-bottom: 8px;">Username</p>
                    <p style="margin: 0; font-size: 18px; color: #000; font-weight: 600;">{{ dog.lister.username }}</p>
                    {% endif %}
                </div>
                
                <div style="text-align: center; min-width: 200px;">
                    <div style="width: 60px; height: 60px; background: #f8f9fa; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 15px; border: 2px solid #e0e0e0;">
                        <i class="fas fa-envelope" style="font-size: 24px; color: #ff6f91;"></i>
                    </div>
                    <p style="margin: 0; color: #5a3e00; font-size: 12px; text-transform: uppercase; letter-spacing: 1px; font-weight: 600; margin-bottom: 8px;">Email</p>
                    <a href="mailto:{{ dog.lister.email }}" style="color: #ff6f91; text-decoration: none; font-size: 16px; font-weight: 600; display: block; word-break: break-all;">{{ dog.lister.email }}</a>
                </div>
                
                {% if lister_phone %}
                <div style="text-align: center; min-width: 200px;">
                    <div style="width: 60px; height: 60px; background: #f8f9fa; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 15px; border: 2px solid #e0e0e0;">
                        <i class="fas fa-phone" style="font-size: 24px; color: #ff6f91;"></i>
                    </div>
                    <p style="margin: 0; color: #5a3e00; font-size: 12px; text-transform: uppercase; letter-spacing: 1px; font-weight: 600; margin-bottom: 8px;">Phone</p>
                    <a href="tel:{{ lister_phone }}" style="color: #ff6f91; text-decoration: none; font-size: 18px; font-weight: 600;">{{ lister_phone }}</a>
                </div>
                {% endif %}
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}